"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){var a={ok:{label:"OK",default:!0}},n={cancel:{label:"CANCEL"},confirm:{label:"CONFIRM",default:!0}},i={cancel:{label:"CANCEL"},confirm:{label:"CONFIRM",default:!0}},o={animate:!0,attrs:null,buttons:null,callback:null,dismissible:!0,input:null,locale:"en",message:"",title:""},l={en:{OK:"Ok",CONFIRM:"Confirm",CANCEL:"Cancel"},id:{OK:"Oke",CONFIRM:"Setuju",CANCEL:"Batal"}},r={};r.index=0,r.get=function(t){return(t||"")+r.index++};var s=function(t,e){if("object"===_typeof(e[0]))return e[0];var a={alert:[{type:"string",negation:!1,param:"message"},{type:"string",negation:!1,param:"title"},{type:"function",negation:!1,param:"callback"}],confirm:[{type:"string",negation:!1,param:"message"},{type:"string",negation:!1,param:"title"},{type:"function",negation:!1,param:"callback"}],prompt:[{type:"string",negation:!1,param:"message"},{type:"string",negation:!1,param:"title"},{type:"function",negation:!0,param:"value"},{type:"function",negation:!1,param:"callback"}]}[t],n={};return e.forEach(function(t){if(a.length)for(var e=void 0,i=void 0===t?"undefined":_typeof(t);(e=a.shift())&&e;)if((!e.negation||e.type!=i)&&(e.negation||e.type==i)){n[e.param]=t;break}}),n},p=function(t){this.action=null,this.element=null,this.instance=null,this.input=null,this.options=t,this.buttons=[];for(var e in o)t.hasOwnProperty(e)||(t[e]=o[e]);var a=this.buildHTML(),n=this.buildMOptions();this.instance=new M.Modal(a,n),this.instance.open()};p.prototype.close=function(){this.instance.close()},p.prototype.buildHTML=function(){var t=this.options,a=this,n=null,i=this.element=e('<div class="modal"></div>').appendTo(document.body);if(t.attrs)for(var o in t.attrs)"class"===o?i.addClass(t.attrs[o]):i.attr(o,t.attrs[o]);var r=e('<div class="modal-content"></div>').appendTo(i);if(t.title&&e("<h4>"+t.title+"</h4>").appendTo(r),t.message&&e("<p>"+t.message+"</p>").appendTo(r),t.input&&(n=a.buildInput(r)),t.buttons){var s=e('<div class="modal-footer"></div>').appendTo(i);for(var p in t.buttons){var c=t.buttons[p],u=c.label;l[t.locale]&&l[t.locale][u]&&(u=l[t.locale][u]);var d=e('<a href="#!" data-name="'+p+'" class="modal-action modal-close waves-effect btn-flat">'+u+"</a>").appendTo(s);c.attrs||(c.attrs={}),c.attrs.class||(c.attrs.class="cancel"!=p?"waves-green":"waves-red"),d.addClass(c.attrs.class),d.one("click",function(){a.action=e(this)}),c.default&&d.data("default",!0),a.buttons.push(d)}}return n&&n(),i.get(0)},p.prototype.buildInput=function(t){var a=this,n=this.options.input;if(n){var i=n.instance||{};n.id=r.get("modal-input-"),n.type||(n.type="text");var o=null,l=void 0,s=void 0,p=[],c=[];switch(n.type){case"checkbox":case"radio":l=e('<div class="checkbox-field"></div>').appendTo(t),c=e.isArray(n.value)?n.value:[n.value],n.options.forEach(function(t){var a=e("<div></div>").appendTo(l),i=e("<label></label>").appendTo(a);s=e('<input type="'+n.type+'" name="'+n.id+'" value="'+t.value+'">').appendTo(i),e("<span>"+t.text+"</span>").appendTo(i),"radio"==n.type&&n.value==t.value?s.prop("checked",!0):"checkbox"==n.type&&~c.indexOf(t.value)&&s.prop("checked",!0),p.push(s)}),this.input=p;break;case"slider":s=e('<div id="'+n.id+'"></div>').appendTo(t),noUiSlider.create(s.get(0),i),this.input=s;break;case"range":if(l=e('<div class="range-field"></div>').appendTo(t),s=e('<input type="range" id="'+n.id+'">').appendTo(l),n.attrs)for(var u in n.attrs){var d=n.attrs[u];"class"==u?s.addClass(d):s.attr(u,d)}this.input=s;break;default:switch(l=e('<div class="input-field"></div>').appendTo(t),n.type){case"textarea":s=e('<textarea class="materialize-textarea" id="'+n.id+'"></textarea>').appendTo(l),n.value&&s.val(n.value),o=function(t){return function(){setTimeout(function(){t.trigger("autoresize")},100)}}(s);break;case"select":if(s=e("<select></select>").appendTo(l),n.attrs&&n.attrs.multiple&&s.prop("multiple",!0),n.label){var f="disabled";n.value||(f+=" selected"),s.append('<option value="" '+f+">"+n.label+"</option>")}if(n.options){var v={};c=e.isArray(n.value)?n.value:[n.value],n.options.forEach(function(t){var a=e('<option value="'+t.value+'">'+t.text+"</option>");~c.indexOf(t.value)&&a.attr("selected","selected"),t.icon&&(s.addClass("icons"),a.attr("data-icon",t.icon)),t.group?(v[t.group]||(v[t.group]=e('<optgroup label="'+t.group+'"></optgroup>').appendTo(s)),v[t.group].append(a)):s.append(a)})}o=function(t,e){return function(){setTimeout(function(){t.data("instance",new M.Select(t.get(0),e))},100)}}(s,i);break;default:if(s=e('<input type="'+n.type+'" id="'+n.id+'">').appendTo(l),~["email","url"].indexOf(n.type)&&(s.addClass("validate"),l.append('<span class="helper-text" data-error="Invalid value"></span>')),n.options){var b={};n.options.forEach(function(t){b[t.text]=null}),i.data=b,i.onAutocomplete=function(){s.data("efac",!0),n.instance&&n.instance.onAutocomplete&&n.instance.onAutocomplete()},s.data("instance",new M.Autocomplete(s.get(0),i))}n.value&&s.val(n.value),s.on("keyup",function(t){if(13==t.keyCode)return n.options&&s.data("efac")?s.data("efac",!1):void a.buttons.forEach(function(t){t.data("default")&&t.get(0).click()})})}if(n.label&&l.append('<label for="'+n.id+'">'+n.label+"</label>"),n.attrs)for(var m in n.attrs){var y=n.attrs[m];"class"==m?s.addClass(y):s.attr(m,y)}this.input=s}return o}},p.prototype.buildMOptions=function(){var t={},a=this.options,n=this;return t.dismissible=a.dismissible,a.animate||(t.inDuration=t.outDuration=0),t.ready=function(){a.init&&a.init(),n.input&&n.input.get?n.input.get(0).focus():n.buttons.forEach(function(t){t.data("default")&&t.get(0).focus()})},t.complete=function(){if(a.callback)if(n.action){var t=n.action.data("name"),i=a.buttons[t];if(i.callback&&i.callback(),"confirm"!==t)a.callback("cancel"!=t&&void 0);else if(n.input){var o="";switch(a.input.type){case"checkbox":o=[],n.input.forEach(function(t){t.prop("checked")&&o.push(t.val())});break;case"radio":n.input.forEach(function(t){t.prop("checked")&&(o=t.val())});break;case"slider":o=n.input.get(0).noUiSlider.get();break;default:o=n.input.val(),"select"==a.input.type&&e.isArray(o)&&""==o[0]&&o.splice(0,1)}o||(o=""),a.callback(o)}else a.callback(!0)}else a.callback();n.element.remove()},t};var c={};c.addLocale=function(t,e){return l[t]=e,c},c.alert=function(t,e,n){var i=s("alert",[t,e,n]);return i.buttons=a,i.input=null,c.dialog(i)},c.confirm=function(t,e,a){var i=s("confirm",[t,e,a]);return i.buttons=n,i.input=null,c.dialog(i)},c.dialog=function(t){return new p(t)},c.prompt=function(t,e,a,n){var o=s("prompt",[t,e,a,n]);return o.buttons=i,o.input||(o.input={type:"text"}),o.value&&!o.input.value&&(o.input.value=o.value),c.dialog(o)},c.removeLocale=function(t){return l[t]&&delete l[t],c},c.setDefaults=function(t){for(var e in o)t.hasOwnProperty(e)&&(o[e]=t[e]);return c},c.setLocale=function(t){if(!l[t])throw new Error("Translation named "+t+" not exists.");return o.locale=t,c},t.mzbox=c}(window,cash);